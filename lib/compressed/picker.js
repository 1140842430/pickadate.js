/*!
 * pickadate.js v3.0.0-alpha,Â 2013-05-03
 * By Amsul (http://amsul.ca)
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
function Picker(e,t,n,r){function o(){return createNode("div",createNode("div",createNode("div",d.component.nodes(a.open),s.box),s.wrap),s.frame)}function i(){d.open(),d.$holder.addClass(s.focused)}var a={id:Math.abs(~~(1e9*Math.random()))},s=t.klass,c=e[0],l=function(){return this.start()},d=l.prototype={constructor:l,$node:e,start:function(){return a&&a.start?d:(a.methods={},a.start=!0,a.open=!1,a.type=c.type,c.autofocus=c==document.activeElement,c.type="text",c.readOnly=!0,d.component=new n(d,t),d.$holder=$(createNode("div",o(),s.holder)).on({focusin:function(e){d.$holder.removeClass(s.focused),e.stopPropagation()},mousedown:function(e){e.target!=d.$holder[0]&&e.stopPropagation()},click:function(e){var t=e.target,n=$(t),r=n.data();t!=d.$holder[0]&&(e.stopPropagation(),!d.$holder.find(document.activeElement).length&&a.open&&c.focus(),r.nav&&!n.hasClass(s.navDisabled)?d.set("highlight",d.component.item.highlight,{nav:r.nav}):isInteger(r.pick)&&!n.hasClass(s.disabled)?d.set({select:r.pick,highlight:r.pick}).close(!0):r.clear&&d.clear().close(!0))}}),d._hidden=t.formatSubmit?$("<input type=hidden name="+c.name+(t.hiddenSuffix||"_submit")+(e.data("value")?' value="'+triggerFunction(d.component.formats.toString,d.component,[t.formatSubmit,d.component.item.select]):"")+'">')[0]:void 0,e.addClass(s.input).on("focus.P"+a.id,i).on("click.P"+a.id,d.open).on("change.P"+a.id,function(){d._hidden&&(d._hidden.value=c.value?triggerFunction(d.component.formats.toString,d.component,[t.formatSubmit,d.component.item.select]):"")}).on("keydown.P"+a.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);(32==t||n||!a.open&&d.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?d.clear().close():d.open())}).val(e.data("value")?triggerFunction(d.component.formats.toString,d.component,[t.format,d.component.item.select]):"").after(d.$holder,d._hidden).data(r,d),d.on({start:d.component.onStart,render:d.component.onRender,stop:d.component.onStop,open:d.component.onOpen,close:d.component.onClose,set:d.component.onSet}).on({start:t.onStart,render:t.onRender,stop:t.onStop,open:t.onOpen,close:t.onClose,set:t.onSet}),c.autofocus&&d.open(),d.trigger("start").trigger("render"))},render:function(){return d.$holder.html(o()),d.trigger("render")},stop:function(){return a.start?(d.close(),d._hidden&&d._hidden.parentNode.removeChild(d._hidden),d.$holder.remove(),e.removeClass(s.input).off(".P"+a.id).removeData(r),c.type=a.type,c.readOnly=!1,d.trigger("stop"),a.methods={},a.start=!1,d):d},open:function(){return a.open?d:(a.open=!0,e.focus().addClass(s.active),d.$holder.addClass(s.opened),$DOCUMENT.on("click.P"+a.id+" focusin.P"+a.id,function(e){e.target!=c&&e.target!=document&&d.close()}).on("keydown.P"+a.id,function(e){var t=e.keyCode,n=d.component.key[t],r=e.target;27==t?d.close(!0):r!=c||!n&&13!=t?d.$holder.find(r).length&&13==t&&(e.preventDefault(),r.click()):(e.preventDefault(),n?triggerFunction(d.component.key.go,d,[n]):d.set("select",d.component.item.highlight).close())}),d.trigger("open"))},close:function(t){return t&&(e.off("focus.P"+a.id).focus(),setTimeout(function(){e.on("focus.P"+a.id,i)},0)),a.open?(a.open=!1,e.removeClass(s.active),d.$holder.removeClass(s.opened+" "+s.focused),$DOCUMENT.off(".P"+a.id),d.trigger("close")):d},clear:function(){return d.set("clear")},set:function(n,r,o){var i,a,s=isObject(n),c=s?n:{};if(n){s||(c[n]=r);for(i in c)a=c[i],d.component.item[i]&&d.component.set(i,a,o||{}),("select"==i||"clear"==i)&&e.val("clear"==i?"":triggerFunction(d.component.formats.toString,d.component,[t.format,d.component.get(i)])).trigger("change");d.render()}return d.trigger("set",c)},get:function(e,t){return e=e||"value",null!=a[e]?a[e]:"value"==e?c.value:d.component.item[e]?"string"==typeof t?triggerFunction(d.component.formats.toString,d.component,[t,d.component.get(e)]):d.component.get(e):void 0},on:function(e,t){var n,r,o=isObject(e),i=o?e:{};if(e){o||(i[e]=t);for(n in i)r=i[n],a.methods[n]=a.methods[n]||[],a.methods[n].push(r)}return d},trigger:function(e,t){var n=a.methods[e];return n&&n.map(function(e){triggerFunction(e,d,[t])}),d}};return new l}function createGroupOfNodes(e){for(var t,n="",r=triggerFunction(e.min,e);triggerFunction(e.max,e,[r])>=r;r+=e.i)t=triggerFunction(e.item,e,[r]),n+=createNode(e.node,t[0],t[1],t[2]);return n}function createNode(e,t,n,r){return t?(t=Array.isArray(t)?t.join(""):t,n=n?' class="'+n+'"':"",r=r?" "+r:"","<"+e+n+r+">"+t+"</"+e+">"):""}function leadZero(e){return(10>e?"0":"")+e}function triggerFunction(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e}function getDigitsLength(e){return/\d/.test(e[1])?2:1}function isObject(e){return{}.toString.call(e).indexOf("Object")>-1}function isDate(e){return{}.toString.call(e).indexOf("Date")>-1}function isInteger(e){return{}.toString.call(e).indexOf("Number")>-1&&0===e%1}var CLASSES_PREFIX="picker__",$DOCUMENT=$(document);Picker.extend=function(e,t,n){$.fn[e]=function(n,r){var o=this.data(e);return"picker"==n?o:o&&"string"==typeof n?(triggerFunction(o[n],o,[r]),this):this.each(function(){var r=$(this);r.data(e)||new Picker(r,$.extend(!0,{},$.fn[e].defaults,n),t,e)})},$.fn[e].defaults=n};